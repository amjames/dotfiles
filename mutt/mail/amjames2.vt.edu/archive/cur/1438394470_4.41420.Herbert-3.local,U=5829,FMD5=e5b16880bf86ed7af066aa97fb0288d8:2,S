Return-Path: <amjames2@vt.edu>
Received: from [10.0.1.22] (h80adb7d3.dhcp.vt.edu. [128.173.183.211])
        by mx.google.com with ESMTPSA id d69sm7785664qhc.3.2015.04.08.09.14.33
        for <crawdad@vt.edu>
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 08 Apr 2015 09:14:33 -0700 (PDT)
From: Andrew James <amjames2@vt.edu>
Content-Type: multipart/alternative; boundary="Apple-Mail=_7793FE8A-F061-4BB6-866F-6E357CACBED8"
Message-Id: <24780742-E26C-4949-AE2D-499F14EED9BB@vt.edu>
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2070.6\))
Subject: Re: Natural orbitals
Date: Wed, 8 Apr 2015 12:14:30 -0400
References: <CAH0V_1byf=CF8vGAhc05iz1gVQ8conR_-f-bMhRdAxuu3bNaFw@mail.gmail.com> <CA+58rsDrkvQvOGyjXjA+n4xg1woh5ENSOtwSbxWzvRkXYkxfWQ@mail.gmail.com> <E27DB792-A084-4D1F-8246-7F6D0B76C1B9@vt.edu> <A501C7E7-BB11-4935-9E8B-7560F5A9BA03@vt.edu> <CAH0V_1bYG42PsnMNNvNuEhmiHYKhJ6UPQ=JTLZc3AkaWiSgEag@mail.gmail.com> <8E9D226E-D4B8-4E33-B1C9-CAA17EC43FB8@vt.edu> <CAH0V_1ZxjKMz1BFmT=mQZ5bNRMdHJ5WUpf3UHGwxRLegQrzEUA@mail.gmail.com>
To: "T. Daniel Crawford" <crawdad@vt.edu>
In-Reply-To: <CAH0V_1ZxjKMz1BFmT=mQZ5bNRMdHJ5WUpf3UHGwxRLegQrzEUA@mail.gmail.com>
X-Mailer: Apple Mail (2.2070.6)


--Apple-Mail=_7793FE8A-F061-4BB6-866F-6E357CACBED8
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

Dr Crawford,=20

I am sorry I never hit send on this message.  Yes, that works great I =
will see you tomorrow at 4pm.=20

Thanks=20

=E2=80=94AJ=20
> On Apr 7, 2015, at 9:49 PM, T. Daniel Crawford <crawdad@vt.edu> wrote:
>=20
> AJ,
>=20
> Can you meet me at 4pm after your Thursday class?
>=20
> -TDC
>=20
> --
> Prof. T. Daniel Crawford
> crawdad@vt.edu <mailto:crawdad@vt.edu>
> On Tue, Apr 7, 2015 at 5:04 PM, Andrew James <amjames2@vt.edu =
<mailto:amjames2@vt.edu>> wrote:
> Hello,Dr. Crawford,=20
>=20
> That would be great. Tomorrow afternoon I have to teach from 2-4 PM, =
and Thursday afternoon I have class 2-330PM.  I can come by any time =
other than that.=20
>=20
> Thank you for your help with this.=20
>=20
> --AJ=20
>=20
>> On Apr 7, 2015, at 2:46 PM, T. Daniel Crawford <crawdad@vt.edu =
<mailto:crawdad@vt.edu>> wrote:
>>=20
>> Hi, AJ,
>>=20
>> I've made some progress on the natural orbital efforts and identified =
a few unexpected pitfalls.  I'll keep you informed, but I also think we =
should sit down together and go through aspects of the code so that you =
can understand what I'm doing.  I've got a long list of things I have to =
accomplish today, but perhaps tomorrow or Thursday afternoon might work.
>>=20
>> -TDC
>>=20
>> --
>> Prof. T. Daniel Crawford
>> crawdad@vt.edu <mailto:crawdad@vt.edu>
>> On Sat, Apr 4, 2015 at 5:02 PM, Andrew James <amjames2@vt.edu =
<mailto:amjames2@vt.edu>> wrote:
>> I have put together a summery of what I have tried and found out so =
far. I have also made sure you can access the executable of the modified =
version of psi in :=20
>> ~amjames2/installed/psi4_NatOrb/bin
>>=20
>> I think the ROHF jobs are getting a segfault because of the sortone =
code.  Inside sortone_ROHF.cc there is a statement that the code =
does=E2=80=99t work with frozen orbitals.  I have tried submitting the =
job with no frozen orbitals to see if It runs.  That will take a bit =
longer to get to where it fails in the first place so I will update you =
on the success/failure.=20
>>=20
>> The segfault in the ROHF jobs happens after the information about =
occupied orbitals is printed in the output file.  I made some print =
statements in dipole.cc <http://dipole.cc/> to try and narrow it down =
and found that it is at the line:=20
>> Pap[i][j] =3D moinfo.opdm[I][J]=20
>> in dipole.cc <http://dipole.cc/> (line 79 ).=20
>>=20
>> I have not made as much progress with the failures in the UHF code. =
But I have an idea:
>> I am getting a message in the job error file that indicates the =
program is trying to free the same thing=20
>>=20
>>=20
>> *** glibc detected *** /home/amjames2/installed/psi4_NatOrb/bin/psi4: =
double free or corruption (out): 0x0000000005ff8570 ***
>> =3D=3D=3D=3D=3D=3D=3D Backtrace: =3D=3D=3D=3D=3D=3D=3D=3D=3D
>> /lib64/libc.so.6(+0x75366)[0x2b0f023e3366]
>>=20
>> I think this happens becasue I am still trying to use moinfo.opdm for =
UHF, and with the UHF reference I should be using the two different =
opdm=E2=80=99s a and b.=20
>>=20
>> The good news is I can=E2=80=99t find any problems with them =
modifications I made to change how many of the NO occupation numbers are =
printed. =20
>>=20
>> I have also given you access to the modified source code if you =
wanted to take a look.  It is in:=20
>>=20
>> ~amjames2/src/psi4/NatOrbs/src =E2=80=A6=20
>>=20
>> Do you want to meet to talk about this sometime this week? I think my =
major problem here is not quite understanding how the natural orbitals =
occupations calculation works.=20
>>=20
>> I hope this info is able to help.=20
>>=20
>> =E2=80=94AJ=20
>>=20
>>=20
>>=20
>>> On Apr 4, 2015, at 1:01 PM, T. Daniel Crawford <crawdad@vt.edu =
<mailto:crawdad@vt.edu>> wrote:
>>>=20
>>> Can you send me an input file?
>>>=20
>>> TDC
>>>=20
>>> Sent from my iPhone
>>>=20
>>> On Apr 4, 2015, at 12:56 PM, Andrew James <amjames2@vt.edu =
<mailto:amjames2@vt.edu>> wrote:
>>>=20
>>>> Dr. Crawford,
>>>>=20
>>>> I think I will need some help moving forward. I am not quite sure =
what I need to change at this point to get it working.
>>>>=20
>>>> --AJ
>>>>=20
>>>> Andrew James=20
>>>>=20
>>>> Graduate Teaching Assistant=20
>>>> Virginia Tech=20
>>>> Chemistry Department=20
>>>> amjames2@vt.edu <mailto:amjames2@vt.edu>
>>>> On Sat, Apr 4, 2015 at 10:04 AM, T. Daniel Crawford <crawdad@vt.edu =
<mailto:crawdad@vt.edu>> wrote:
>>>> Dear AJ,
>>>>=20
>>>> Prof. Lischka tells me that they are in the stage of preparing =
their manuscript on the aromatic systems, and they would like to have =
results from us as soon as possible.  Do you need help from me to move =
forward with the code and testing?
>>>>=20
>>>> -TDC
>>>>=20
>>>> --
>>>> Prof. T. Daniel Crawford
>>>> crawdad@vt.edu <mailto:crawdad@vt.edu>
>>=20
>>=20
>=20
>=20


--Apple-Mail=_7793FE8A-F061-4BB6-866F-6E357CACBED8
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dutf-8"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" =
class=3D"">Dr Crawford,&nbsp;<div class=3D""><br class=3D""></div><div =
class=3D"">I am sorry I never hit send on this message. &nbsp;Yes, that =
works great I will see you tomorrow at 4pm.&nbsp;</div><div class=3D""><br=
 class=3D""></div><div class=3D"">Thanks&nbsp;</div><div class=3D""><br =
class=3D""></div><div class=3D"">=E2=80=94AJ&nbsp;<br =
class=3D""><div><blockquote type=3D"cite" class=3D""><div class=3D"">On =
Apr 7, 2015, at 9:49 PM, T. Daniel Crawford &lt;<a =
href=3D"mailto:crawdad@vt.edu" class=3D"">crawdad@vt.edu</a>&gt; =
wrote:</div><br class=3D"Apple-interchange-newline"><div class=3D""><div =
dir=3D"ltr" class=3D"">AJ,<div class=3D""><br class=3D""></div><div =
class=3D"">Can you meet me at 4pm after your Thursday class?</div><div =
class=3D""><br class=3D""></div><div class=3D"">-TDC</div></div><div =
class=3D"gmail_extra"><br clear=3D"all" class=3D""><div class=3D""><div =
class=3D"gmail_signature"><div dir=3D"ltr" class=3D"">--<div =
class=3D"">Prof. T. Daniel Crawford</div><div class=3D""><a =
href=3D"mailto:crawdad@vt.edu" target=3D"_blank" =
class=3D"">crawdad@vt.edu</a></div></div></div></div>
<br class=3D""><div class=3D"gmail_quote">On Tue, Apr 7, 2015 at 5:04 =
PM, Andrew James <span dir=3D"ltr" class=3D"">&lt;<a =
href=3D"mailto:amjames2@vt.edu" target=3D"_blank" =
class=3D"">amjames2@vt.edu</a>&gt;</span> wrote:<br class=3D""><blockquote=
 class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
solid;padding-left:1ex"><div style=3D"word-wrap:break-word" =
class=3D"">Hello,Dr. Crawford,&nbsp;<div class=3D""><br =
class=3D""></div><div class=3D"">That would be great. Tomorrow afternoon =
I have to teach from 2-4 PM, and Thursday afternoon I have class =
2-330PM.&nbsp; I can come by any time other than that.&nbsp;</div><div =
class=3D""><br class=3D""></div><div class=3D"">Thank you for your help =
with this.&nbsp;</div><span class=3D"HOEnZb"><font color=3D"#888888" =
class=3D""><div class=3D""><br class=3D""></div></font></span><div =
class=3D""><span class=3D"HOEnZb"><font color=3D"#888888" =
class=3D"">--AJ&nbsp;</font></span><div class=3D""><div class=3D"h5"><br =
class=3D""><div class=3D""><blockquote type=3D"cite" class=3D""><div =
class=3D"">On Apr 7, 2015, at 2:46 PM, T. Daniel Crawford &lt;<a =
href=3D"mailto:crawdad@vt.edu" target=3D"_blank" =
class=3D"">crawdad@vt.edu</a>&gt; wrote:</div><br class=3D""><div =
class=3D""><div dir=3D"ltr" class=3D"">Hi, AJ,<div class=3D""><br =
class=3D""></div><div class=3D"">I've made some progress on the natural =
orbital efforts and identified a few unexpected pitfalls.&nbsp; I'll =
keep you informed, but I also think we should sit down together and go =
through aspects of the code so that you can understand what I'm =
doing.&nbsp; I've got a long list of things I have to accomplish today, =
but perhaps tomorrow or Thursday afternoon might work.</div><div =
class=3D""><br class=3D""></div><div class=3D"">-TDC</div></div><div =
class=3D"gmail_extra"><br clear=3D"all" class=3D""><div class=3D""><div =
class=3D""><div dir=3D"ltr" class=3D"">--<div class=3D"">Prof. T. Daniel =
Crawford</div><div class=3D""><a href=3D"mailto:crawdad@vt.edu" =
target=3D"_blank" class=3D"">crawdad@vt.edu</a></div></div></div></div>
<br class=3D""><div class=3D"gmail_quote">On Sat, Apr 4, 2015 at 5:02 =
PM, Andrew James <span dir=3D"ltr" class=3D"">&lt;<a =
href=3D"mailto:amjames2@vt.edu" target=3D"_blank" =
class=3D"">amjames2@vt.edu</a>&gt;</span> wrote:<br class=3D""><blockquote=
 class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
solid;padding-left:1ex"><div style=3D"word-wrap:break-word" class=3D"">I =
have put together a summery of what I have tried and found out so far. I =
have also made sure you can access the executable of the modified =
version of psi in :&nbsp;<div =
class=3D"">~amjames2/installed/psi4_NatOrb/bin<br class=3D""><div =
class=3D""><br class=3D""></div><div class=3D"">I think the ROHF jobs =
are getting a segfault because of the sortone code.&nbsp; Inside =
sortone_ROHF.cc there is a statement that the code does=E2=80=99t work =
with frozen orbitals.&nbsp; I have tried submitting the job with no =
frozen orbitals to see if It runs.&nbsp; That will take a bit longer to =
get to where it fails in the first place so I will update you on the =
success/failure.&nbsp;</div><div class=3D""><br class=3D""></div><div =
class=3D"">The segfault in the ROHF jobs happens after the information =
about occupied orbitals is printed in the output file.&nbsp; I made some =
print statements in <a href=3D"http://dipole.cc/" target=3D"_blank" =
class=3D"">dipole.cc</a>&nbsp;to try and narrow it down and found that =
it is at the line:&nbsp;</div><div class=3D"">Pap[i][j] =3D =
moinfo.opdm[I][J]&nbsp;</div><div class=3D"">in <a =
href=3D"http://dipole.cc/" target=3D"_blank" =
class=3D"">dipole.cc</a>&nbsp;(line 79 ).&nbsp;</div><div class=3D""><br =
class=3D""></div><div class=3D"">I have not made as much progress with =
the failures in the UHF code. But I have an idea:</div><div class=3D"">I =
am getting a message in the job error file that indicates the program is =
trying to free the same thing&nbsp;</div><div class=3D""><br =
class=3D""></div><div class=3D""><div class=3D""><br class=3D""></div><div=
 class=3D"">*** glibc detected *** =
/home/amjames2/installed/psi4_NatOrb/bin/psi4: double free or corruption =
(out): 0x0000000005ff8570 ***</div><div class=3D"">=3D=3D=3D=3D=3D=3D=3D =
Backtrace: =3D=3D=3D=3D=3D=3D=3D=3D=3D</div><div =
class=3D"">/lib64/libc.so.6(+0x75366)[0x2b0f023e3366]</div></div><div =
class=3D""><br class=3D""></div><div class=3D"">I think this happens =
becasue I am still trying to use moinfo.opdm for UHF, and with the UHF =
reference I should be using the two different opdm=E2=80=99s a and =
b.&nbsp;</div><div class=3D""><br class=3D""></div><div class=3D"">The =
good news is I can=E2=80=99t find any problems with them modifications I =
made to change how many of the NO occupation numbers are printed. =
&nbsp;</div><div class=3D""><br class=3D""></div><div class=3D"">I have =
also given you access to the modified source code if you wanted to take =
a look.&nbsp; It is in:&nbsp;</div><div class=3D""><br =
class=3D""></div><div class=3D"">~amjames2/src/psi4/NatOrbs/src =
=E2=80=A6&nbsp;</div><div class=3D""><br class=3D""></div><div =
class=3D"">Do you want to meet to talk about this sometime this week? I =
think my major problem here is not quite understanding how the natural =
orbitals occupations calculation works.&nbsp;</div><div class=3D""><br =
class=3D""></div><div class=3D"">I hope this info is able to =
help.&nbsp;</div><span class=3D""><font color=3D"#888888" class=3D""><div =
class=3D""><br class=3D""></div><div =
class=3D"">=E2=80=94AJ&nbsp;</div></font></span><div class=3D""><div =
class=3D""><div class=3D""><br class=3D""></div><div class=3D""><br =
class=3D""></div><div class=3D""><br class=3D""></div><div class=3D""><div=
 class=3D""><blockquote type=3D"cite" class=3D""><div class=3D"">On Apr =
4, 2015, at 1:01 PM, T. Daniel Crawford &lt;<a =
href=3D"mailto:crawdad@vt.edu" target=3D"_blank" =
class=3D"">crawdad@vt.edu</a>&gt; wrote:</div><br class=3D""><div =
class=3D""><div dir=3D"auto" class=3D""><div class=3D"">Can you send me =
an input file?</div><div class=3D""><br class=3D""></div><div =
class=3D"">TDC<br class=3D""><br class=3D"">Sent from my =
iPhone</div><div class=3D""><br class=3D"">On Apr 4, 2015, at 12:56 PM, =
Andrew James &lt;<a href=3D"mailto:amjames2@vt.edu" target=3D"_blank" =
class=3D"">amjames2@vt.edu</a>&gt; wrote:<br class=3D""><br =
class=3D""></div><blockquote type=3D"cite" class=3D""><div class=3D""><div=
 dir=3D"ltr" class=3D"">Dr. Crawford,<div class=3D""><br =
class=3D""></div><div class=3D"">I think I will need some help moving =
forward. I am not quite sure what I need to change at this point to get =
it working.</div><div class=3D""><br class=3D""></div><div =
class=3D"">--AJ</div></div><div class=3D"gmail_extra"><br clear=3D"all" =
class=3D""><div class=3D""><div class=3D""><div dir=3D"ltr" =
class=3D"">Andrew James&nbsp;<div class=3D""><br class=3D""><div =
class=3D"">Graduate Teaching Assistant&nbsp;<br class=3D""><div =
class=3D"">Virginia Tech&nbsp;</div></div><div class=3D"">Chemistry =
Department&nbsp;</div></div><div class=3D""><a =
href=3D"mailto:amjames2@vt.edu" target=3D"_blank" =
class=3D"">amjames2@vt.edu</a></div></div></div></div>
<br class=3D""><div class=3D"gmail_quote">On Sat, Apr 4, 2015 at 10:04 =
AM, T. Daniel Crawford <span dir=3D"ltr" class=3D"">&lt;<a =
href=3D"mailto:crawdad@vt.edu" target=3D"_blank" =
class=3D"">crawdad@vt.edu</a>&gt;</span> wrote:<br class=3D""><blockquote =
class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
solid;padding-left:1ex"><div dir=3D"ltr" class=3D"">Dear AJ,<div =
class=3D""><br class=3D""></div><div class=3D"">Prof. Lischka tells me =
that they are in the stage of preparing their manuscript on the aromatic =
systems, and they would like to have results from us as soon as =
possible.&nbsp; Do you need help from me to move forward with the code =
and testing?</div><div class=3D""><br class=3D""></div><div =
class=3D"">-TDC</div><div class=3D""><br clear=3D"all" class=3D""><div =
class=3D""><div class=3D""><div dir=3D"ltr" class=3D"">--<div =
class=3D"">Prof. T. Daniel Crawford</div><div class=3D""><a =
href=3D"mailto:crawdad@vt.edu" target=3D"_blank" =
class=3D"">crawdad@vt.edu</a></div></div></div></div>
</div></div>
</blockquote></div><br class=3D""></div>
</div></blockquote></div></div></blockquote></div><br =
class=3D""></div></div></div></div></div></blockquote></div><br =
class=3D""></div>
</div></blockquote></div><br =
class=3D""></div></div></div></div></blockquote></div><br =
class=3D""></div>
</div></blockquote></div><br class=3D""></div></body></html>=

--Apple-Mail=_7793FE8A-F061-4BB6-866F-6E357CACBED8--
