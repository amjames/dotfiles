Delivered-To: amjames2@vt.edu
Received: by 10.140.25.151 with SMTP id 23csp32555qgt;
        Thu, 6 Aug 2015 11:15:21 -0700 (PDT)
X-Received: by 10.140.165.5 with SMTP id l5mr5690792qhl.85.1438884921326;
        Thu, 06 Aug 2015 11:15:21 -0700 (PDT)
Return-Path: <andrew.m.james2+caf_=amjames2=vt.edu@gmail.com>
Received: from mr2.cc.vt.edu (mr2.cc.ipv6.vt.edu. [2001:468:c80:2105:0:212:7ed0:359e])
        by mx.google.com with ESMTPS id i14si13252842qhc.60.2015.08.06.11.15.21
        for <amjames2@vt.edu>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 06 Aug 2015 11:15:21 -0700 (PDT)
Received-SPF: softfail (google.com: domain of transitioning andrew.m.james2+caf_=amjames2=vt.edu@gmail.com does not designate 192.92.207.222 as permitted sender) client-ip=192.92.207.222;
Authentication-Results: mx.google.com;
       spf=softfail (google.com: domain of transitioning andrew.m.james2+caf_=amjames2=vt.edu@gmail.com does not designate 192.92.207.222 as permitted sender) smtp.mail=andrew.m.james2+caf_=amjames2=vt.edu@gmail.com;
       dkim=pass header.i=@gmail.com
Received: from mail-io0-x236.google.com (mail-io0-x236.google.com [IPv6:2607:f8b0:4001:c06::236])
	by mr2.cc.vt.edu (8.14.4/8.14.4) with ESMTP id t76IFE9p024238
	for <amjames2@vt.edu>; Thu, 6 Aug 2015 14:15:20 -0400
Received: by iodd187 with SMTP id d187so89451199iod.2
        for <amjames2@vt.edu>; Thu, 06 Aug 2015 11:15:14 -0700 (PDT)
X-Received: by 10.107.165.14 with SMTP id o14mr3994330ioe.76.1438884914735;
        Thu, 06 Aug 2015 11:15:14 -0700 (PDT)
X-Forwarded-To: amjames2@vt.edu
X-Forwarded-For: andrew.m.james2@gmail.com amjames2@vt.edu
Delivered-To: andrew.m.james2@gmail.com
Received: by 10.64.19.209 with SMTP id h17csp1136318iee;
        Thu, 6 Aug 2015 11:15:13 -0700 (PDT)
X-Received: by 10.70.31.5 with SMTP id w5mr5892549pdh.3.1438884913627;
        Thu, 06 Aug 2015 11:15:13 -0700 (PDT)
Received: from mail-pa0-x231.google.com (mail-pa0-x231.google.com. [2607:f8b0:400e:c03::231])
        by mx.google.com with ESMTPS id rf10si12745109pab.42.2015.08.06.11.15.13
        for <andrew.m.james2@gmail.com>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 06 Aug 2015 11:15:13 -0700 (PDT)
Received-SPF: pass (google.com: domain of andy.simmonett@gmail.com designates 2607:f8b0:400e:c03::231 as permitted sender) client-ip=2607:f8b0:400e:c03::231;
Received: by mail-pa0-x231.google.com with SMTP id yb7so34829468pab.0
        for <andrew.m.james2@gmail.com>; Thu, 06 Aug 2015 11:15:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=content-type:mime-version:subject:from:in-reply-to:date:cc
         :message-id:references:to;
        bh=pwAt/aS7/4zidNcUbJxXUJKBPDagKLFgyMJACKoAIGY=;
        b=YHAM1ltRj/ii/H2dk0Gl1GgSyKSG6olUtihB1hoFoBtvYpCFFA5ypAiIlLT+k76r97
         brd02pua9lx2pRFbS/YeMAeqdWJsoJOZDvS2NeX/OD3uP6w+vve5tU2ZDNHsm+kAnBBY
         +zK1UMpla1vlbIPBQtZMJTrDTpbRLmE4fksfdYh9pctawCKmP+gRkciPaEtFTcBNOGJZ
         JeLZjn/XVJWmtGZ1ETA/U4csdVz7fvnw+PdSUY96/6mMG70tmjHF4Jj98nJw/zgaVXU2
         jLacxVOcxPbsifTmpuNBbvsQuFNEDMlfqjKIKAQ3SS+L+onYQoej7aPGmQ9051VqAWp1
         mQRg==
X-Received: by 10.66.236.70 with SMTP id us6mr5887772pac.39.1438884913200;
        Thu, 06 Aug 2015 11:15:13 -0700 (PDT)
Received: from [10.0.1.6] ([192.92.207.222])
        by smtp.gmail.com with ESMTPSA id tx5sm7342587pab.30.2015.08.06.11.15.12
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 06 Aug 2015 11:15:12 -0700 (PDT)
Content-Type: multipart/alternative; boundary="Apple-Mail=_CA4C4E53-574F-46B2-BA37-1E66F4D7395B"
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2102\))
Subject: Re: UHF::finalize() called twice?
From: Andrew Simmonett <andy.simmonett@gmail.com>
In-Reply-To: <CAH0V_1YGHDPM9gon=qbkRpNNu1ogwqQTE91AJR-MfZj_1xif=A@mail.gmail.com>
Date: Thu, 6 Aug 2015 12:15:11 -0600
Cc: Andrew James <andrew.m.james2@gmail.com>
Message-Id: <4FC6C6B3-A91A-478B-8344-31C4868F3B42@gmail.com>
References: <CAH0V_1YGHDPM9gon=qbkRpNNu1ogwqQTE91AJR-MfZj_1xif=A@mail.gmail.com>
To: "T. Daniel Crawford" <crawdad@vt.edu>
X-Mailer: Apple Mail (2.2102)
X-Spam-Status: No, score=-0.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
	DKIM_VALID_AU,FREEMAIL_FROM,HTML_MESSAGE autolearn=disabled version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on mr2.cc.vt.edu
X-Gm-Spam: 0
X-Gm-Phishy: 0
X-Gm-Spam: 0
X-Gm-Phishy: 0


--Apple-Mail=_CA4C4E53-574F-46B2-BA37-1E66F4D7395B
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

Daniel,

It looks like both calls stem from the same call in HF::compute.  =
Perhaps the extra call from your plugin is not needed; if you remove the =
explicit call to UHF::finalize from your code, do you just get a single =
call to UHF finalize?  I don=E2=80=99t fully understand it yet, but =
here=E2=80=99s the call stack from GDB:


(gdb) b uhf.cc:90
Breakpoint 1 at 0x102e41bf3: file =
/Users/andysim/programming/psi4/src/lib/libscf_solver/uhf.cc, line 90.
(gdb) r
Starting program: =
/Users/andysim/programming/psi4/obj_clang_debug/bin/psi4=20
warning: =
`/BinaryCache/coreTLS/coreTLS-35.30.2~2/Objects/coretls.build/coretls.buil=
d/Objects-normal/x86_64/system_coretls_vers.o': can't open to read =
symbols: No such file or directory.
warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_c=
iphersuites.a"
warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_h=
andshake.a"
warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_r=
ecord.a"
warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_s=
tream_parser.a"

Breakpoint 1, psi::scf::UHF::finalize (this=3D0x105c7b400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/uhf.cc:91
91	    for (int h=3D0; h<nirrep_; ++h) {
(gdb) bt
#0  psi::scf::UHF::finalize (this=3D0x105c7b400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/uhf.cc:91
#1  0x0000000102e8a5c4 in psi::scf::HF::compute_energy =
(this=3D0x105c7b400)
    at /Users/andysim/programming/psi4/src/lib/libscf_solver/hf.cc:1957
#2  0x000000010135b9e6 in psi::scf::scf (options=3D..., pre=3D0x104f082f8 =
<_Py_NoneStruct>, post=3D0x104f082f8 <_Py_NoneStruct>)
    at /Users/andysim/programming/psi4/src/bin/scf/main.cc:106
#3  0x00000001003890be in py_psi_scf_callbacks (precallback=3D0x104f082f8 =
<_Py_NoneStruct>,=20
    postcallback=3D0x104f082f8 <_Py_NoneStruct>) at =
/Users/andysim/programming/psi4/src/bin/psi4/python.cc:302
#4  0x00000001003ccba1 in ?? ()
#5  0x00007fff5fbfceb0 in ?? ()
#6  0x0000000104f082f8 in _Py_NotImplementedStruct () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python
#7  0x0000000100388ff0 in ?? () at =
/Users/andysim/programming/psi4/src/bin/psi4/python.cc:297
#8  0x00007fff5fbfced8 in ?? ()
#9  0x0000000104f082f8 in _Py_NotImplementedStruct () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python
#10 0x00007fff5fbfcf00 in ?? ()
#11 0x00007fff5fbfcf10 in ?? ()
#12 0x0000000105470808 in ?? ()
#13 0x00007fff5fbfced8 in ?? ()
#14 0x0000000105470808 in ?? ()
#15 0x00007fff5fbfcf40 in ?? ()
#16 0x00000001003ccafd in ?? ()
#17 0x00007fff5fbfcf40 in ?? ()
#18 0x00000001002cb0b7 in ?? ()
#19 0x0000000105470808 in ?? ()
#20 0x0000000105470808 in ?? ()
#21 0x00000001054660b8 in ?? ()
#22 0x00000001054660b8 in ?? ()
#23 0x00000001054571e8 in ?? ()
#24 0x00000001054571e8 in ?? ()
#25 0x00007fff5fbfcf00 in ?? ()
#26 0x00000001030473f0 in ?? () at =
libs/python/src/converter/builtin_converters.cpp:46
#27 0x0000000104f082f8 in _Py_NotImplementedStruct () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python
#28 0x00000001081ae170 in ?? ()
#29 0x0000000104f082f8 in _Py_NotImplementedStruct () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python
#30 0x00000001081a0758 in ?? ()
#31 0x0000000000000000 in ?? ()
(gdb) c
Continuing.

Breakpoint 1, psi::scf::UHF::finalize (this=3D0x1060aa400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/uhf.cc:91
91	    for (int h=3D0; h<nirrep_; ++h) {
(gdb) bt
#0  psi::scf::UHF::finalize (this=3D0x1060aa400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/uhf.cc:91
#1  0x00000001081c25c5 in psi::scf::NewUHF::finalize (this=3D0x1060aa400) =
at newuhf.cc:46
#2  0x0000000102e8a5c4 in psi::scf::HF::compute_energy =
(this=3D0x1060aa400)
    at /Users/andysim/programming/psi4/src/lib/libscf_solver/hf.cc:1957
#3  0x00000001081c4903 in uhfno (options=3D...) at uhfno.cc:59
#4  0x00000001002897a1 in py_psi_plugin (fullpathname=3D...)
    at =
/Users/andysim/programming/psi4/src/bin/psi4/export_plugins.cc:110
#5  0x000000010028d35f in ?? ()
#6  0x00007fff5fbfd0d0 in ?? ()
#7  0x00007fff5fbfd1c0 in ?? ()
#8  0x0000000104f0b0b8 in PyString_Type () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python
#9  0x00007fff5fbfd0b0 in ?? ()
#10 0x0000000100289280 in ?? ()
#11 0x00007fff5fbfd160 in ?? ()
#12 0x00007fff5fbfd0d0 in ?? ()
#13 0x00000001000d5218 in ?? ()
#14 0x732e6f6e66687510 in ?? ()
#15 0x000000010555006f in ?? ()
#16 0x00007fff5fbfd240 in ?? ()
#17 0x0000000105445148 in ?? ()
#18 0x00007fff5fbfd1c0 in ?? ()
#19 0x0000000105445148 in ?? ()
#20 0x00007fff5fbfd160 in ?? ()
#21 0x0000000105445148 in ?? ()
#22 0x00007fff5fbfd210 in ?? ()
#23 0x000000010028d240 in ?? ()
#24 0x0000000105466b50 in ?? ()
#25 0x0000000000000000 in ?? ()
(gdb) c
Continuing.
[Inferior 1 (process 90701) exited normally]
(gdb)


> On Aug 6, 2015, at 12:02 PM, T. Daniel Crawford <crawdad@vt.edu> =
wrote:
>=20
> Hi, Andy,
>=20
> Can you help me to figure out why UHF::finalize() appears to be called =
twice when the stability code is utilized?  I've tried to follow the =
program flow, but no luck.
>=20
> You can see what I mean by adding:
>=20
> outfile->Printf("\nIn UHF::finalize()\n");
>=20
> to the beginning of UHF::finalize() and running the attached input =
file.
>=20
> -TDC
> --
> Prof. T. Daniel Crawford
> crawdad@vt.edu <mailto:crawdad@vt.edu><input.dat>


--Apple-Mail=_CA4C4E53-574F-46B2-BA37-1E66F4D7395B
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dutf-8"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" =
class=3D"">Daniel,<div class=3D""><br class=3D""></div><div class=3D"">It =
looks like both calls stem from the same call in HF::compute. =
&nbsp;Perhaps the extra call from your plugin is not needed; if you =
remove the explicit call to UHF::finalize from your code, do you just =
get a single call to UHF finalize? &nbsp;I don=E2=80=99t fully =
understand it yet, but here=E2=80=99s the call stack from GDB:</div><div =
class=3D""><br class=3D""></div><div class=3D""><br class=3D""></div><div =
class=3D""><div style=3D"margin: 0px; font-family: 'Courier New'; color: =
rgb(255, 255, 255); background-color: rgb(66, 66, 66);" class=3D"">(gdb) =
b <a href=3D"http://uhf.cc" class=3D"">uhf.cc</a>:90</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">Breakpoint 1 at =
0x102e41bf3: file =
/Users/andysim/programming/psi4/src/lib/libscf_solver/<a =
href=3D"http://uhf.cc" class=3D"">uhf.cc</a>, line 90.</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">(gdb) r</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">Starting program: =
/Users/andysim/programming/psi4/obj_clang_debug/bin/psi4&nbsp;</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">warning: =
`/BinaryCache/coreTLS/coreTLS-35.30.2~2/Objects/coretls.build/coretls.buil=
d/Objects-normal/x86_64/system_coretls_vers.o': can't open to read =
symbols: No such file or directory.</div><div style=3D"margin: 0px; =
font-family: 'Courier New'; color: rgb(255, 255, 255); background-color: =
rgb(66, 66, 66);" class=3D"">warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_c=
iphersuites.a"</div><div style=3D"margin: 0px; font-family: 'Courier =
New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, 66);" =
class=3D"">warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_h=
andshake.a"</div><div style=3D"margin: 0px; font-family: 'Courier New'; =
color: rgb(255, 255, 255); background-color: rgb(66, 66, 66);" =
class=3D"">warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_r=
ecord.a"</div><div style=3D"margin: 0px; font-family: 'Courier New'; =
color: rgb(255, 255, 255); background-color: rgb(66, 66, 66);" =
class=3D"">warning: Could not open OSO archive file =
"/BinaryCache/coreTLS/coreTLS-35.30.2~2/Symbols/BuiltProducts/libcoretls_s=
tream_parser.a"</div><div style=3D"margin: 0px; font-family: 'Courier =
New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, 66); =
min-height: 14px;" class=3D""><br class=3D""></div><div style=3D"margin: =
0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">Breakpoint 1, =
psi::scf::UHF::finalize (this=3D0x105c7b400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/<a =
href=3D"http://uhf.cc" class=3D"">uhf.cc</a>:91</div><div style=3D"margin:=
 0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">91<span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>&nbsp; =
&nbsp; for (int h=3D0; h&lt;nirrep_; ++h) {</div><div style=3D"margin: =
0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">(gdb) bt</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#0&nbsp; =
psi::scf::UHF::finalize (this=3D0x105c7b400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/<a =
href=3D"http://uhf.cc" class=3D"">uhf.cc</a>:91</div><div style=3D"margin:=
 0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">#1&nbsp; =
0x0000000102e8a5c4 in psi::scf::HF::compute_energy =
(this=3D0x105c7b400)</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">&nbsp; &nbsp; at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/<a =
href=3D"http://hf.cc" class=3D"">hf.cc</a>:1957</div><div style=3D"margin:=
 0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">#2&nbsp; =
0x000000010135b9e6 in psi::scf::scf (options=3D..., pre=3D0x104f082f8 =
&lt;_Py_NoneStruct&gt;, post=3D0x104f082f8 =
&lt;_Py_NoneStruct&gt;)</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">&nbsp; &nbsp; at =
/Users/andysim/programming/psi4/src/bin/scf/<a href=3D"http://main.cc" =
class=3D"">main.cc</a>:106</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#3&nbsp; 0x00000001003890be in py_psi_scf_callbacks =
(precallback=3D0x104f082f8 &lt;_Py_NoneStruct&gt;,&nbsp;</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">&nbsp; &nbsp; =
postcallback=3D0x104f082f8 &lt;_Py_NoneStruct&gt;) at =
/Users/andysim/programming/psi4/src/bin/psi4/<a href=3D"http://python.cc" =
class=3D"">python.cc</a>:302</div><div style=3D"margin: 0px; =
font-family: 'Courier New'; color: rgb(255, 255, 255); background-color: =
rgb(66, 66, 66);" class=3D"">#4&nbsp; 0x00000001003ccba1 in ?? =
()</div><div style=3D"margin: 0px; font-family: 'Courier New'; color: =
rgb(255, 255, 255); background-color: rgb(66, 66, 66);" =
class=3D"">#5&nbsp; 0x00007fff5fbfceb0 in ?? ()</div><div style=3D"margin:=
 0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">#6&nbsp; =
0x0000000104f082f8 in _Py_NotImplementedStruct () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#7&nbsp; =
0x0000000100388ff0 in ?? () at =
/Users/andysim/programming/psi4/src/bin/psi4/<a href=3D"http://python.cc" =
class=3D"">python.cc</a>:297</div><div style=3D"margin: 0px; =
font-family: 'Courier New'; color: rgb(255, 255, 255); background-color: =
rgb(66, 66, 66);" class=3D"">#8&nbsp; 0x00007fff5fbfced8 in ?? =
()</div><div style=3D"margin: 0px; font-family: 'Courier New'; color: =
rgb(255, 255, 255); background-color: rgb(66, 66, 66);" =
class=3D"">#9&nbsp; 0x0000000104f082f8 in _Py_NotImplementedStruct () =
from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#10 =
0x00007fff5fbfcf00 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#11 0x00007fff5fbfcf10 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#12 =
0x0000000105470808 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#13 0x00007fff5fbfced8 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#14 =
0x0000000105470808 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#15 0x00007fff5fbfcf40 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#16 =
0x00000001003ccafd in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#17 0x00007fff5fbfcf40 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#18 =
0x00000001002cb0b7 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#19 0x0000000105470808 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#20 =
0x0000000105470808 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#21 0x00000001054660b8 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#22 =
0x00000001054660b8 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#23 0x00000001054571e8 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#24 =
0x00000001054571e8 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#25 0x00007fff5fbfcf00 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#26 =
0x00000001030473f0 in ?? () at =
libs/python/src/converter/builtin_converters.cpp:46</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#27 =
0x0000000104f082f8 in _Py_NotImplementedStruct () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#28 =
0x00000001081ae170 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#29 0x0000000104f082f8 in _Py_NotImplementedStruct () =
from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#30 =
0x00000001081a0758 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#31 0x0000000000000000 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">(gdb) c</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">Continuing.</div><div=
 style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66); min-height: 14px;" class=3D""><br=
 class=3D""></div><div style=3D"margin: 0px; font-family: 'Courier New'; =
color: rgb(255, 255, 255); background-color: rgb(66, 66, 66);" =
class=3D"">Breakpoint 1, psi::scf::UHF::finalize (this=3D0x1060aa400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/<a =
href=3D"http://uhf.cc" class=3D"">uhf.cc</a>:91</div><div style=3D"margin:=
 0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">91<span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>&nbsp; =
&nbsp; for (int h=3D0; h&lt;nirrep_; ++h) {</div><div style=3D"margin: =
0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">(gdb) bt</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#0&nbsp; =
psi::scf::UHF::finalize (this=3D0x1060aa400) at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/<a =
href=3D"http://uhf.cc" class=3D"">uhf.cc</a>:91</div><div style=3D"margin:=
 0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">#1&nbsp; =
0x00000001081c25c5 in psi::scf::NewUHF::finalize (this=3D0x1060aa400) at =
<a href=3D"http://newuhf.cc" class=3D"">newuhf.cc</a>:46</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#2&nbsp; =
0x0000000102e8a5c4 in psi::scf::HF::compute_energy =
(this=3D0x1060aa400)</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">&nbsp; &nbsp; at =
/Users/andysim/programming/psi4/src/lib/libscf_solver/<a =
href=3D"http://hf.cc" class=3D"">hf.cc</a>:1957</div><div style=3D"margin:=
 0px; font-family: 'Courier New'; color: rgb(255, 255, 255); =
background-color: rgb(66, 66, 66);" class=3D"">#3&nbsp; =
0x00000001081c4903 in uhfno (options=3D...) at <a href=3D"http://uhfno.cc"=
 class=3D"">uhfno.cc</a>:59</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#4&nbsp; 0x00000001002897a1 in py_psi_plugin =
(fullpathname=3D...)</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">&nbsp; &nbsp; at =
/Users/andysim/programming/psi4/src/bin/psi4/export_plugins.cc:110</div><d=
iv style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, =
255, 255); background-color: rgb(66, 66, 66);" class=3D"">#5&nbsp; =
0x000000010028d35f in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#6&nbsp; 0x00007fff5fbfd0d0 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#7&nbsp; =
0x00007fff5fbfd1c0 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#8&nbsp; 0x0000000104f0b0b8 in PyString_Type () from =
/System/Library/Frameworks/Python.framework/Versions/2.6/Python</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#9&nbsp; =
0x00007fff5fbfd0b0 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#10 0x0000000100289280 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#11 =
0x00007fff5fbfd160 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#12 0x00007fff5fbfd0d0 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#13 =
0x00000001000d5218 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#14 0x732e6f6e66687510 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#15 =
0x000000010555006f in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#16 0x00007fff5fbfd240 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#17 =
0x0000000105445148 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#18 0x00007fff5fbfd1c0 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#19 =
0x0000000105445148 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#20 0x00007fff5fbfd160 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#21 =
0x0000000105445148 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#22 0x00007fff5fbfd210 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#23 =
0x000000010028d240 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">#24 0x0000000105466b50 in ?? ()</div><div =
style=3D"margin: 0px; font-family: 'Courier New'; color: rgb(255, 255, =
255); background-color: rgb(66, 66, 66);" class=3D"">#25 =
0x0000000000000000 in ?? ()</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">(gdb) c</div><div style=3D"margin: 0px; font-family: =
'Courier New'; color: rgb(255, 255, 255); background-color: rgb(66, 66, =
66);" class=3D"">Continuing.</div><div style=3D"margin: 0px; =
font-family: 'Courier New'; color: rgb(255, 255, 255); background-color: =
rgb(66, 66, 66);" class=3D"">[Inferior 1 (process 90701) exited =
normally]</div><div style=3D"margin: 0px; font-family: 'Courier New'; =
color: rgb(255, 255, 255); background-color: rgb(66, 66, 66);" =
class=3D"">(gdb)</div></div><div class=3D""><br class=3D""></div><div =
class=3D""><br class=3D""><div><blockquote type=3D"cite" class=3D""><div =
class=3D"">On Aug 6, 2015, at 12:02 PM, T. Daniel Crawford &lt;<a =
href=3D"mailto:crawdad@vt.edu" class=3D"">crawdad@vt.edu</a>&gt; =
wrote:</div><br class=3D"Apple-interchange-newline"><div class=3D""><div =
dir=3D"ltr" class=3D"">Hi, Andy,<div class=3D""><br class=3D""></div><div =
class=3D"">Can you help me to figure out why UHF::finalize() appears to =
be called twice when the stability code is utilized?&nbsp; I've tried to =
follow the program flow, but no luck.</div><div class=3D""><br =
class=3D""></div><div class=3D"">You can see what I mean by =
adding:</div><div class=3D""><br class=3D""></div><div =
class=3D"">outfile-&gt;Printf("\nIn UHF::finalize()\n");</div><div =
class=3D""><br class=3D""></div><div class=3D"">to the beginning of =
UHF::finalize() and running the attached input file.</div><div =
class=3D""><br class=3D""></div><div class=3D"">-TDC<br clear=3D"all" =
class=3D""><div class=3D""><div class=3D"gmail_signature"><div dir=3D"ltr"=
 class=3D"">--<div class=3D"">Prof. T. Daniel Crawford</div><div =
class=3D""><a href=3D"mailto:crawdad@vt.edu" target=3D"_blank" =
class=3D"">crawdad@vt.edu</a></div></div></div></div>
</div></div>
<span =
id=3D"cid:B58EB163-4131-484D-A27F-B03E0BCE9C07">&lt;input.dat&gt;</span></=
div></blockquote></div><br class=3D""></div></body></html>=

--Apple-Mail=_CA4C4E53-574F-46B2-BA37-1E66F4D7395B--
